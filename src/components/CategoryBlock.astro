---
import type { HomeImageConfig } from '../lib/homeImages';

interface Props {
	href: string;
	image: HomeImageConfig;
	subtitle?: string;
	title: string;
}

const { href, image, subtitle, title } = Astro.props;

const hasImage = !!image.src;
const placeholderStyle = hasImage ? undefined : `background: ${image.fallbackColor};`;
---

<a href={href} class="category-block fx-hover">
	{hasImage ? (
		<img
			src={image.src!}
			alt={image.alt}
			class="category-block-image fx-img-zoom"
			loading="lazy"
		/>
	) : (
		<div class="category-block-image" style={placeholderStyle}></div>
	)}
	<div class="category-block-overlay">
		{subtitle && <p class="category-block-subtitle">{subtitle}</p>}
		<h3 class="category-block-title">{title}</h3>
	</div>
</a>

<style>
	.category-block {
		position: relative;
		overflow: hidden;
		display: block;
		aspect-ratio: 4/5;
		background: #f5f5f5;
	}

	.category-block-image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.4s ease;
	}

	.category-block:hover .category-block-image {
		transform: scale(1.05);
	}

	.category-block-overlay {
		position: absolute;
		inset: 0;
		background: rgba(0, 0, 0, 0.25);
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		color: #fff;
		text-align: center;
		transition: background 0.3s ease;
	}

	.category-block:hover .category-block-overlay {
		background: rgba(0, 0, 0, 0.35);
	}

	.category-block-title {
		font-size: 1.5rem;
		font-weight: 400;
		letter-spacing: 0.15em;
		text-transform: uppercase;
		margin: 0;
	}

	.category-block-subtitle {
		font-size: 0.75rem;
		letter-spacing: 0.1em;
		text-transform: uppercase;
		margin: 0 0 0.5rem;
		opacity: 0.85;
	}
</style>
